{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/tributejs@5.1.3/node_modules/tributejs/dist/tribute.esm.js"],
  "sourcesContent": ["if (!Array.prototype.find) {\n    Array.prototype.find = function(predicate) {\n        if (this === null) {\n            throw new TypeError('Array.prototype.find called on null or undefined')\n        }\n        if (typeof predicate !== 'function') {\n            throw new TypeError('predicate must be a function')\n        }\n        var list = Object(this);\n        var length = list.length >>> 0;\n        var thisArg = arguments[1];\n        var value;\n\n        for (var i = 0; i < length; i++) {\n            value = list[i];\n            if (predicate.call(thisArg, value, i, list)) {\n                return value\n            }\n        }\n        return undefined\n    };\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n  function CustomEvent$1(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt\n  }\n\n if (typeof window.Event !== 'undefined') {\n   CustomEvent$1.prototype = window.Event.prototype;\n }\n\n  window.CustomEvent = CustomEvent$1;\n}\n\nclass TributeEvents {\n  constructor(tribute) {\n    this.tribute = tribute;\n    this.tribute.events = this;\n  }\n\n  static keys() {\n    return [\n      {\n        key: 9,\n        value: \"TAB\"\n      },\n      {\n        key: 8,\n        value: \"DELETE\"\n      },\n      {\n        key: 13,\n        value: \"ENTER\"\n      },\n      {\n        key: 27,\n        value: \"ESCAPE\"\n      },\n      {\n        key: 32,\n        value: \"SPACE\"\n      },\n      {\n        key: 38,\n        value: \"UP\"\n      },\n      {\n        key: 40,\n        value: \"DOWN\"\n      }\n    ];\n  }\n\n  bind(element) {\n    element.boundKeydown = this.keydown.bind(element, this);\n    element.boundKeyup = this.keyup.bind(element, this);\n    element.boundInput = this.input.bind(element, this);\n\n    element.addEventListener(\"keydown\", element.boundKeydown, false);\n    element.addEventListener(\"keyup\", element.boundKeyup, false);\n    element.addEventListener(\"input\", element.boundInput, false);\n  }\n\n  unbind(element) {\n    element.removeEventListener(\"keydown\", element.boundKeydown, false);\n    element.removeEventListener(\"keyup\", element.boundKeyup, false);\n    element.removeEventListener(\"input\", element.boundInput, false);\n\n    delete element.boundKeydown;\n    delete element.boundKeyup;\n    delete element.boundInput;\n  }\n\n  keydown(instance, event) {\n    if (instance.shouldDeactivate(event)) {\n      instance.tribute.isActive = false;\n      instance.tribute.hideMenu();\n    }\n\n    let element = this;\n    instance.commandEvent = false;\n\n    TributeEvents.keys().forEach(o => {\n      if (o.key === event.keyCode) {\n        instance.commandEvent = true;\n        instance.callbacks()[o.value.toLowerCase()](event, element);\n      }\n    });\n  }\n\n  input(instance, event) {\n    instance.inputEvent = true;\n    instance.keyup.call(this, instance, event);\n  }\n\n  click(instance, event) {\n    let tribute = instance.tribute;\n    if (tribute.menu && tribute.menu.contains(event.target)) {\n      let li = event.target;\n      event.preventDefault();\n      event.stopPropagation();\n      while (li.nodeName.toLowerCase() !== \"li\") {\n        li = li.parentNode;\n        if (!li || li === tribute.menu) {\n          throw new Error(\"cannot find the <li> container for the click\");\n        }\n      }\n      tribute.selectItemAtIndex(li.getAttribute(\"data-index\"), event);\n      tribute.hideMenu();\n\n      // TODO: should fire with externalTrigger and target is outside of menu\n    } else if (tribute.current.element && !tribute.current.externalTrigger) {\n      tribute.current.externalTrigger = false;\n      setTimeout(() => tribute.hideMenu());\n    }\n  }\n\n  keyup(instance, event) {\n    if (instance.inputEvent) {\n      instance.inputEvent = false;\n    }\n    instance.updateSelection(this);\n\n    if (event.keyCode === 27) return;\n\n    if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n      instance.tribute.hasTrailingSpace = false;\n      instance.commandEvent = true;\n      instance.callbacks()[\"space\"](event, this);\n      return;\n    }\n\n    if (!instance.tribute.isActive) {\n      if (instance.tribute.autocompleteMode) {\n        instance.callbacks().triggerChar(event, this, \"\");\n      } else {\n        let keyCode = instance.getKeyCode(instance, this, event);\n\n        if (isNaN(keyCode) || !keyCode) return;\n\n        let trigger = instance.tribute.triggers().find(trigger => {\n          return trigger.charCodeAt(0) === keyCode;\n        });\n\n        if (typeof trigger !== \"undefined\") {\n          instance.callbacks().triggerChar(event, this, trigger);\n        }\n      }\n    }\n\n    if (\n      instance.tribute.current.mentionText.length <\n      instance.tribute.current.collection.menuShowMinLength\n    ) {\n      return;\n    }\n\n    if (\n      ((instance.tribute.current.trigger ||\n        instance.tribute.autocompleteMode) &&\n        instance.commandEvent === false) ||\n      (instance.tribute.isActive && event.keyCode === 8)\n    ) {\n      instance.tribute.showMenuFor(this, true);\n    }\n  }\n\n  shouldDeactivate(event) {\n    if (!this.tribute.isActive) return false;\n\n    if (this.tribute.current.mentionText.length === 0) {\n      let eventKeyPressed = false;\n      TributeEvents.keys().forEach(o => {\n        if (event.keyCode === o.key) eventKeyPressed = true;\n      });\n\n      return !eventKeyPressed;\n    }\n\n    return false;\n  }\n\n  getKeyCode(instance, el, event) {\n    let tribute = instance.tribute;\n    let info = tribute.range.getTriggerInfo(\n      false,\n      tribute.hasTrailingSpace,\n      true,\n      tribute.allowSpaces,\n      tribute.autocompleteMode\n    );\n\n    if (info) {\n      return info.mentionTriggerChar.charCodeAt(0);\n    } else {\n      return false;\n    }\n  }\n\n  updateSelection(el) {\n    this.tribute.current.element = el;\n    let info = this.tribute.range.getTriggerInfo(\n      false,\n      this.tribute.hasTrailingSpace,\n      true,\n      this.tribute.allowSpaces,\n      this.tribute.autocompleteMode\n    );\n\n    if (info) {\n      this.tribute.current.selectedPath = info.mentionSelectedPath;\n      this.tribute.current.mentionText = info.mentionText;\n      this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n    }\n  }\n\n  callbacks() {\n    return {\n      triggerChar: (e, el, trigger) => {\n        let tribute = this.tribute;\n        tribute.current.trigger = trigger;\n\n        let collectionItem = tribute.collection.find(item => {\n          return item.trigger === trigger;\n        });\n\n        tribute.current.collection = collectionItem;\n\n        if (\n          tribute.current.mentionText.length >=\n            tribute.current.collection.menuShowMinLength &&\n          tribute.inputEvent\n        ) {\n          tribute.showMenuFor(el, true);\n        }\n      },\n      enter: (e, el) => {\n        // choose selection\n        if (this.tribute.isActive && this.tribute.current.filteredItems) {\n          e.preventDefault();\n          e.stopPropagation();\n          setTimeout(() => {\n            this.tribute.selectItemAtIndex(this.tribute.menuSelected, e);\n            this.tribute.hideMenu();\n          }, 0);\n        }\n      },\n      escape: (e, el) => {\n        if (this.tribute.isActive) {\n          e.preventDefault();\n          e.stopPropagation();\n          this.tribute.isActive = false;\n          this.tribute.hideMenu();\n        }\n      },\n      tab: (e, el) => {\n        // choose first match\n        this.callbacks().enter(e, el);\n      },\n      space: (e, el) => {\n        if (this.tribute.isActive) {\n          if (this.tribute.spaceSelectsMatch) {\n            this.callbacks().enter(e, el);\n          } else if (!this.tribute.allowSpaces) {\n            e.stopPropagation();\n            setTimeout(() => {\n              this.tribute.hideMenu();\n              this.tribute.isActive = false;\n            }, 0);\n          }\n        }\n      },\n      up: (e, el) => {\n        // navigate up ul\n        if (this.tribute.isActive && this.tribute.current.filteredItems) {\n          e.preventDefault();\n          e.stopPropagation();\n          let count = this.tribute.current.filteredItems.length,\n            selected = this.tribute.menuSelected;\n\n          if (count > selected && selected > 0) {\n            this.tribute.menuSelected--;\n            this.setActiveLi();\n          } else if (selected === 0) {\n            this.tribute.menuSelected = count - 1;\n            this.setActiveLi();\n            this.tribute.menu.scrollTop = this.tribute.menu.scrollHeight;\n          }\n        }\n      },\n      down: (e, el) => {\n        // navigate down ul\n        if (this.tribute.isActive && this.tribute.current.filteredItems) {\n          e.preventDefault();\n          e.stopPropagation();\n          let count = this.tribute.current.filteredItems.length - 1,\n            selected = this.tribute.menuSelected;\n\n          if (count > selected) {\n            this.tribute.menuSelected++;\n            this.setActiveLi();\n          } else if (count === selected) {\n            this.tribute.menuSelected = 0;\n            this.setActiveLi();\n            this.tribute.menu.scrollTop = 0;\n          }\n        }\n      },\n      delete: (e, el) => {\n        if (\n          this.tribute.isActive &&\n          this.tribute.current.mentionText.length < 1\n        ) {\n          this.tribute.hideMenu();\n        } else if (this.tribute.isActive) {\n          this.tribute.showMenuFor(el);\n        }\n      }\n    };\n  }\n\n  setActiveLi(index) {\n    let lis = this.tribute.menu.querySelectorAll(\"li\"),\n      length = lis.length >>> 0;\n\n    if (index) this.tribute.menuSelected = parseInt(index);\n\n    for (let i = 0; i < length; i++) {\n      let li = lis[i];\n      if (i === this.tribute.menuSelected) {\n        li.classList.add(this.tribute.current.collection.selectClass);\n\n        let liClientRect = li.getBoundingClientRect();\n        let menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n        if (liClientRect.bottom > menuClientRect.bottom) {\n          let scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n          this.tribute.menu.scrollTop += scrollDistance;\n        } else if (liClientRect.top < menuClientRect.top) {\n          let scrollDistance = menuClientRect.top - liClientRect.top;\n          this.tribute.menu.scrollTop -= scrollDistance;\n        }\n      } else {\n        li.classList.remove(this.tribute.current.collection.selectClass);\n      }\n    }\n  }\n\n  getFullHeight(elem, includeMargin) {\n    let height = elem.getBoundingClientRect().height;\n\n    if (includeMargin) {\n      let style = elem.currentStyle || window.getComputedStyle(elem);\n      return (\n        height + parseFloat(style.marginTop) + parseFloat(style.marginBottom)\n      );\n    }\n\n    return height;\n  }\n}\n\nclass TributeMenuEvents {\n  constructor(tribute) {\n    this.tribute = tribute;\n    this.tribute.menuEvents = this;\n    this.menu = this.tribute.menu;\n  }\n\n  bind(menu) {\n    this.menuClickEvent = this.tribute.events.click.bind(null, this);\n    this.menuContainerScrollEvent = this.debounce(\n      () => {\n        if (this.tribute.isActive) {\n          this.tribute.showMenuFor(this.tribute.current.element, false);\n        }\n      },\n      300,\n      false\n    );\n    this.windowResizeEvent = this.debounce(\n      () => {\n        if (this.tribute.isActive) {\n          this.tribute.range.positionMenuAtCaret(true);\n        }\n      },\n      300,\n      false\n    );\n\n    // fixes IE11 issues with mousedown\n    this.tribute.range\n      .getDocument()\n      .addEventListener(\"MSPointerDown\", this.menuClickEvent, false);\n    this.tribute.range\n      .getDocument()\n      .addEventListener(\"mousedown\", this.menuClickEvent, false);\n    window.addEventListener(\"resize\", this.windowResizeEvent);\n\n    if (this.menuContainer) {\n      this.menuContainer.addEventListener(\n        \"scroll\",\n        this.menuContainerScrollEvent,\n        false\n      );\n    } else {\n      window.addEventListener(\"scroll\", this.menuContainerScrollEvent);\n    }\n  }\n\n  unbind(menu) {\n    this.tribute.range\n      .getDocument()\n      .removeEventListener(\"mousedown\", this.menuClickEvent, false);\n    this.tribute.range\n      .getDocument()\n      .removeEventListener(\"MSPointerDown\", this.menuClickEvent, false);\n    window.removeEventListener(\"resize\", this.windowResizeEvent);\n\n    if (this.menuContainer) {\n      this.menuContainer.removeEventListener(\n        \"scroll\",\n        this.menuContainerScrollEvent,\n        false\n      );\n    } else {\n      window.removeEventListener(\"scroll\", this.menuContainerScrollEvent);\n    }\n  }\n\n  debounce(func, wait, immediate) {\n    var timeout;\n    return () => {\n      var context = this,\n        args = arguments;\n      var later = () => {\n        timeout = null;\n        if (!immediate) func.apply(context, args);\n      };\n      var callNow = immediate && !timeout;\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n      if (callNow) func.apply(context, args);\n    };\n  }\n}\n\n// Thanks to https://github.com/jeff-collins/ment.io\n\nclass TributeRange {\n    constructor(tribute) {\n        this.tribute = tribute;\n        this.tribute.range = this;\n    }\n\n    getDocument() {\n        let iframe;\n        if (this.tribute.current.collection) {\n            iframe = this.tribute.current.collection.iframe;\n        }\n\n        if (!iframe) {\n            return document\n        }\n\n        return iframe.contentWindow.document\n    }\n\n    positionMenuAtCaret(scrollTo) {\n        let context = this.tribute.current,\n            coordinates;\n\n        let info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n        if (typeof info !== 'undefined') {\n\n            if(!this.tribute.positionMenu){\n                this.tribute.menu.style.cssText = `display: block;`;\n                return\n            }\n\n            if (!this.isContentEditable(context.element)) {\n                coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element,\n                    info.mentionPosition);\n            }\n            else {\n                coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n            }\n\n            this.tribute.menu.style.cssText = `top: ${coordinates.top}px;\n                                     left: ${coordinates.left}px;\n                                     right: ${coordinates.right}px;\n                                     bottom: ${coordinates.bottom}px;\n                                     position: absolute;\n                                     display: block;`;\n\n            if (coordinates.left === 'auto') {\n                this.tribute.menu.style.left = 'auto';\n            }\n\n            if (coordinates.top === 'auto') {\n                this.tribute.menu.style.top = 'auto';\n            }\n\n            if (scrollTo) this.scrollIntoView();\n\n            window.setTimeout(() => {\n                let menuDimensions = {\n                   width: this.tribute.menu.offsetWidth,\n                   height: this.tribute.menu.offsetHeight\n                };\n                let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n                let menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n                let menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n                if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n                    this.tribute.menu.style.cssText = 'display: none';\n                    this.positionMenuAtCaret(scrollTo);\n                }\n            }, 0);\n\n        } else {\n            this.tribute.menu.style.cssText = 'display: none';\n        }\n    }\n\n    get menuContainerIsBody() {\n        return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n    }\n\n\n    selectElement(targetElement, path, offset) {\n        let range;\n        let elem = targetElement;\n\n        if (path) {\n            for (var i = 0; i < path.length; i++) {\n                elem = elem.childNodes[path[i]];\n                if (elem === undefined) {\n                    return\n                }\n                while (elem.length < offset) {\n                    offset -= elem.length;\n                    elem = elem.nextSibling;\n                }\n                if (elem.childNodes.length === 0 && !elem.length) {\n                    elem = elem.previousSibling;\n                }\n            }\n        }\n        let sel = this.getWindowSelection();\n\n        range = this.getDocument().createRange();\n        range.setStart(elem, offset);\n        range.setEnd(elem, offset);\n        range.collapse(true);\n\n        try {\n            sel.removeAllRanges();\n        } catch (error) {}\n\n        sel.addRange(range);\n        targetElement.focus();\n    }\n\n    replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n        let info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n        if (info !== undefined) {\n            let context = this.tribute.current;\n            let replaceEvent = new CustomEvent('tribute-replaced', {\n                detail: {\n                    item: item,\n                    instance: context,\n                    context: info,\n                    event: originalEvent,\n                }\n            });\n\n            if (!this.isContentEditable(context.element)) {\n                let myField = this.tribute.current.element;\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\n                    ? this.tribute.replaceTextSuffix\n                    : ' ';\n                text += textSuffix;\n                let startPos = info.mentionPosition;\n                let endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n                if (!this.tribute.autocompleteMode) {\n                    endPos += info.mentionTriggerChar.length - 1;\n                }\n                myField.value = myField.value.substring(0, startPos) + text +\n                    myField.value.substring(endPos, myField.value.length);\n                myField.selectionStart = startPos + text.length;\n                myField.selectionEnd = startPos + text.length;\n            } else {\n                // add a space to the end of the pasted text\n                let textSuffix = typeof this.tribute.replaceTextSuffix == 'string'\n                    ? this.tribute.replaceTextSuffix\n                    : '\\xA0';\n                text += textSuffix;\n                let endPos = info.mentionPosition + info.mentionText.length;\n                if (!this.tribute.autocompleteMode) {\n                    endPos += info.mentionTriggerChar.length;\n                }\n                this.pasteHtml(text, info.mentionPosition, endPos);\n            }\n\n            context.element.dispatchEvent(new CustomEvent('input', { bubbles: true }));\n            context.element.dispatchEvent(replaceEvent);\n        }\n    }\n\n    pasteHtml(html, startPos, endPos) {\n        let range, sel;\n        sel = this.getWindowSelection();\n        range = this.getDocument().createRange();\n        range.setStart(sel.anchorNode, startPos);\n        range.setEnd(sel.anchorNode, endPos);\n        range.deleteContents();\n\n        let el = this.getDocument().createElement('div');\n        el.innerHTML = html;\n        let frag = this.getDocument().createDocumentFragment(),\n            node, lastNode;\n        while ((node = el.firstChild)) {\n            lastNode = frag.appendChild(node);\n        }\n        range.insertNode(frag);\n\n        // Preserve the selection\n        if (lastNode) {\n            range = range.cloneRange();\n            range.setStartAfter(lastNode);\n            range.collapse(true);\n            sel.removeAllRanges();\n            sel.addRange(range);\n        }\n    }\n\n    getWindowSelection() {\n        if (this.tribute.collection.iframe) {\n            return this.tribute.collection.iframe.contentWindow.getSelection()\n        }\n\n        return window.getSelection()\n    }\n\n    getNodePositionInParent(element) {\n        if (element.parentNode === null) {\n            return 0\n        }\n\n        for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n            let node = element.parentNode.childNodes[i];\n\n            if (node === element) {\n                return i\n            }\n        }\n    }\n\n    getContentEditableSelectedPath(ctx) {\n        let sel = this.getWindowSelection();\n        let selected = sel.anchorNode;\n        let path = [];\n        let offset;\n\n        if (selected != null) {\n            let i;\n            let ce = selected.contentEditable;\n            while (selected !== null && ce !== 'true') {\n                i = this.getNodePositionInParent(selected);\n                path.push(i);\n                selected = selected.parentNode;\n                if (selected !== null) {\n                    ce = selected.contentEditable;\n                }\n            }\n            path.reverse();\n\n            // getRangeAt may not exist, need alternative\n            offset = sel.getRangeAt(0).startOffset;\n\n            return {\n                selected: selected,\n                path: path,\n                offset: offset\n            }\n        }\n    }\n\n    getTextPrecedingCurrentSelection() {\n        let context = this.tribute.current,\n            text = '';\n\n        if (!this.isContentEditable(context.element)) {\n            let textComponent = this.tribute.current.element;\n            if (textComponent) {\n                let startPos = textComponent.selectionStart;\n                if (textComponent.value && startPos >= 0) {\n                    text = textComponent.value.substring(0, startPos);\n                }\n            }\n\n        } else {\n            let selectedElem = this.getWindowSelection().anchorNode;\n\n            if (selectedElem != null) {\n                let workingNodeContent = selectedElem.textContent;\n                let selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n                if (workingNodeContent && selectStartOffset >= 0) {\n                    text = workingNodeContent.substring(0, selectStartOffset);\n                }\n            }\n        }\n\n        return text\n    }\n\n    getLastWordInText(text) {\n        text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n        let wordsArray = text.split(/\\s+/);\n        let worldsCount = wordsArray.length - 1;\n        return wordsArray[worldsCount].trim()\n    }\n\n    getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n        let ctx = this.tribute.current;\n        let selected, path, offset;\n\n        if (!this.isContentEditable(ctx.element)) {\n            selected = this.tribute.current.element;\n        } else {\n            let selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n            if (selectionInfo) {\n                selected = selectionInfo.selected;\n                path = selectionInfo.path;\n                offset = selectionInfo.offset;\n            }\n        }\n\n        let effectiveRange = this.getTextPrecedingCurrentSelection();\n        let lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n        if (isAutocomplete) {\n            return {\n                mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n                mentionText: lastWordOfEffectiveRange,\n                mentionSelectedElement: selected,\n                mentionSelectedPath: path,\n                mentionSelectedOffset: offset\n            }\n        }\n\n        if (effectiveRange !== undefined && effectiveRange !== null) {\n            let mostRecentTriggerCharPos = -1;\n            let triggerChar;\n\n            this.tribute.collection.forEach(config => {\n                let c = config.trigger;\n                let idx = config.requireLeadingSpace ?\n                    this.lastIndexWithLeadingSpace(effectiveRange, c) :\n                    effectiveRange.lastIndexOf(c);\n\n                if (idx > mostRecentTriggerCharPos) {\n                    mostRecentTriggerCharPos = idx;\n                    triggerChar = c;\n                    requireLeadingSpace = config.requireLeadingSpace;\n                }\n            });\n\n            if (mostRecentTriggerCharPos >= 0 &&\n                (\n                    mostRecentTriggerCharPos === 0 ||\n                    !requireLeadingSpace ||\n                    /[\\xA0\\s]/g.test(\n                        effectiveRange.substring(\n                            mostRecentTriggerCharPos - 1,\n                            mostRecentTriggerCharPos)\n                    )\n                )\n            ) {\n                let currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + triggerChar.length,\n                    effectiveRange.length);\n\n                triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + triggerChar.length);\n                let firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n                let leadingSpace = currentTriggerSnippet.length > 0 &&\n                    (\n                        firstSnippetChar === ' ' ||\n                        firstSnippetChar === '\\xA0'\n                    );\n                if (hasTrailingSpace) {\n                    currentTriggerSnippet = currentTriggerSnippet.trim();\n                }\n\n                let regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n\n                this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n                if (!leadingSpace && (menuAlreadyActive || !(regex.test(currentTriggerSnippet)))) {\n                    return {\n                        mentionPosition: mostRecentTriggerCharPos,\n                        mentionText: currentTriggerSnippet,\n                        mentionSelectedElement: selected,\n                        mentionSelectedPath: path,\n                        mentionSelectedOffset: offset,\n                        mentionTriggerChar: triggerChar\n                    }\n                }\n            }\n        }\n    }\n\n    lastIndexWithLeadingSpace (str, trigger) {\n        let reversedStr = str.split('').reverse().join('');\n        let index = -1;\n\n        for (let cidx = 0, len = str.length; cidx < len; cidx++) {\n            let firstChar = cidx === str.length - 1;\n            let leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n\n            let match = true;\n            for (let triggerIdx = trigger.length - 1; triggerIdx >= 0; triggerIdx--) {\n              if (trigger[triggerIdx] !== reversedStr[cidx-triggerIdx]) {\n                match = false;\n                break\n              }\n            }\n\n            if (match && (firstChar || leadingSpace)) {\n                index = str.length - 1 - cidx;\n                break\n            }\n        }\n\n        return index\n    }\n\n    isContentEditable(element) {\n        return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA'\n    }\n\n    isMenuOffScreen(coordinates, menuDimensions) {\n        let windowWidth = window.innerWidth;\n        let windowHeight = window.innerHeight;\n        let doc = document.documentElement;\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n        let menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n        let menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n        let menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n        let menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n\n        return {\n            top: menuTop < Math.floor(windowTop),\n            right: menuRight > Math.ceil(windowLeft + windowWidth),\n            bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n            left: menuLeft < Math.floor(windowLeft)\n        }\n    }\n\n    getMenuDimensions() {\n        // Width of the menu depends of its contents and position\n        // We must check what its width would be without any obstruction\n        // This way, we can achieve good positioning for flipping the menu\n        let dimensions = {\n            width: null,\n            height: null\n        };\n\n        this.tribute.menu.style.cssText = `top: 0px;\n                                 left: 0px;\n                                 position: fixed;\n                                 display: block;\n                                 visibility; hidden;`;\n       dimensions.width = this.tribute.menu.offsetWidth;\n       dimensions.height = this.tribute.menu.offsetHeight;\n\n       this.tribute.menu.style.cssText = `display: none;`;\n\n       return dimensions\n    }\n\n    getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n        let properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX',\n            'overflowY', 'borderTopWidth', 'borderRightWidth',\n            'borderBottomWidth', 'borderLeftWidth', 'paddingTop',\n            'paddingRight', 'paddingBottom', 'paddingLeft',\n            'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch',\n            'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily',\n            'textAlign', 'textTransform', 'textIndent',\n            'textDecoration', 'letterSpacing', 'wordSpacing'\n        ];\n\n        let isFirefox = (window.mozInnerScreenX !== null);\n\n        let div = this.getDocument().createElement('div');\n        div.id = 'input-textarea-caret-position-mirror-div';\n        this.getDocument().body.appendChild(div);\n\n        let style = div.style;\n        let computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n\n        style.whiteSpace = 'pre-wrap';\n        if (element.nodeName !== 'INPUT') {\n            style.wordWrap = 'break-word';\n        }\n\n        // position off-screen\n        style.position = 'absolute';\n        style.visibility = 'hidden';\n\n        // transfer the element's properties to the div\n        properties.forEach(prop => {\n            style[prop] = computed[prop];\n        });\n\n        if (isFirefox) {\n            style.width = `${(parseInt(computed.width) - 2)}px`;\n            if (element.scrollHeight > parseInt(computed.height))\n                style.overflowY = 'scroll';\n        } else {\n            style.overflow = 'hidden';\n        }\n\n        div.textContent = element.value.substring(0, position);\n\n        if (element.nodeName === 'INPUT') {\n            div.textContent = div.textContent.replace(/\\s/g, 'Â ');\n        }\n\n        let span = this.getDocument().createElement('span');\n        span.textContent = element.value.substring(position) || '.';\n        div.appendChild(span);\n\n        let rect = element.getBoundingClientRect();\n        let doc = document.documentElement;\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n        let top = 0;\n        let left = 0;\n        if (this.menuContainerIsBody) {\n          top = rect.top;\n          left = rect.left;\n        }\n\n        let coordinates = {\n            top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n            left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n        };\n\n        let windowWidth = window.innerWidth;\n        let windowHeight = window.innerHeight;\n\n        let menuDimensions = this.getMenuDimensions();\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n        if (menuIsOffScreen.right) {\n            coordinates.right = windowWidth - coordinates.left;\n            coordinates.left = 'auto';\n        }\n\n        let parentHeight = this.tribute.menuContainer\n            ? this.tribute.menuContainer.offsetHeight\n            : this.getDocument().body.offsetHeight;\n\n        if (menuIsOffScreen.bottom) {\n            let parentRect = this.tribute.menuContainer\n                ? this.tribute.menuContainer.getBoundingClientRect()\n                : this.getDocument().body.getBoundingClientRect();\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n            coordinates.top = 'auto';\n        }\n\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n        if (menuIsOffScreen.left) {\n            coordinates.left = windowWidth > menuDimensions.width\n                ? windowLeft + windowWidth - menuDimensions.width\n                : windowLeft;\n            delete coordinates.right;\n        }\n        if (menuIsOffScreen.top) {\n            coordinates.top = windowHeight > menuDimensions.height\n                ? windowTop + windowHeight - menuDimensions.height\n                : windowTop;\n            delete coordinates.bottom;\n        }\n\n        this.getDocument().body.removeChild(div);\n        return coordinates\n    }\n\n    getContentEditableCaretPosition(selectedNodePosition) {\n        let range;\n        let sel = this.getWindowSelection();\n\n        range = this.getDocument().createRange();\n        range.setStart(sel.anchorNode, selectedNodePosition);\n        range.setEnd(sel.anchorNode, selectedNodePosition);\n\n        range.collapse(false);\n\n        let rect = range.getBoundingClientRect();\n        let doc = document.documentElement;\n        let windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n        let windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n\n        let left = rect.left;\n        let top = rect.top;\n\n        let coordinates = {\n            left: left + windowLeft,\n            top: top + rect.height + windowTop\n        };\n        let windowWidth = window.innerWidth;\n        let windowHeight = window.innerHeight;\n\n        let menuDimensions = this.getMenuDimensions();\n        let menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n        if (menuIsOffScreen.right) {\n            coordinates.left = 'auto';\n            coordinates.right = windowWidth - rect.left - windowLeft;\n        }\n\n        let parentHeight = this.tribute.menuContainer\n            ? this.tribute.menuContainer.offsetHeight\n            : this.getDocument().body.offsetHeight;\n\n        if (menuIsOffScreen.bottom) {\n            let parentRect = this.tribute.menuContainer\n                ? this.tribute.menuContainer.getBoundingClientRect()\n                : this.getDocument().body.getBoundingClientRect();\n            let scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n\n            coordinates.top = 'auto';\n            coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n        }\n\n        menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n        if (menuIsOffScreen.left) {\n            coordinates.left = windowWidth > menuDimensions.width\n                ? windowLeft + windowWidth - menuDimensions.width\n                : windowLeft;\n            delete coordinates.right;\n        }\n        if (menuIsOffScreen.top) {\n            coordinates.top = windowHeight > menuDimensions.height\n                ? windowTop + windowHeight - menuDimensions.height\n                : windowTop;\n            delete coordinates.bottom;\n        }\n\n        if (!this.menuContainerIsBody) {\n            coordinates.left = coordinates.left ? coordinates.left - this.tribute.menuContainer.offsetLeft : coordinates.left;\n            coordinates.top = coordinates.top ? coordinates.top - this.tribute.menuContainer.offsetTop : coordinates.top;\n        }\n\n        return coordinates\n    }\n\n    scrollIntoView(elem) {\n        let reasonableBuffer = 20,\n            clientRect;\n        let maxScrollDisplacement = 100;\n        let e = this.menu;\n\n        if (typeof e === 'undefined') return;\n\n        while (clientRect === undefined || clientRect.height === 0) {\n            clientRect = e.getBoundingClientRect();\n\n            if (clientRect.height === 0) {\n                e = e.childNodes[0];\n                if (e === undefined || !e.getBoundingClientRect) {\n                    return\n                }\n            }\n        }\n\n        let elemTop = clientRect.top;\n        let elemBottom = elemTop + clientRect.height;\n\n        if (elemTop < 0) {\n            window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n        } else if (elemBottom > window.innerHeight) {\n            let maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n            if (maxY - window.pageYOffset > maxScrollDisplacement) {\n                maxY = window.pageYOffset + maxScrollDisplacement;\n            }\n\n            let targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n            if (targetY > maxY) {\n                targetY = maxY;\n            }\n\n            window.scrollTo(0, targetY);\n        }\n    }\n}\n\n// Thanks to https://github.com/mattyork/fuzzy\nclass TributeSearch {\n    constructor(tribute) {\n        this.tribute = tribute;\n        this.tribute.search = this;\n    }\n\n    simpleFilter(pattern, array) {\n        return array.filter(string => {\n            return this.test(pattern, string)\n        })\n    }\n\n    test(pattern, string) {\n        return this.match(pattern, string) !== null\n    }\n\n    match(pattern, string, opts) {\n        opts = opts || {};\n        let len = string.length,\n            pre = opts.pre || '',\n            post = opts.post || '',\n            compareString = opts.caseSensitive && string || string.toLowerCase();\n\n        if (opts.skip) {\n            return {rendered: string, score: 0}\n        }\n\n        pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n\n        let patternCache = this.traverse(compareString, pattern, 0, 0, []);\n        if (!patternCache) {\n            return null\n        }\n        return {\n            rendered: this.render(string, patternCache.cache, pre, post),\n            score: patternCache.score\n        }\n    }\n\n    traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n        // if the pattern search at end\n        if (pattern.length === patternIndex) {\n\n            // calculate score and copy the cache containing the indices where it's found\n            return {\n                score: this.calculateScore(patternCache),\n                cache: patternCache.slice()\n            }\n        }\n\n        // if string at end or remaining pattern > remaining string\n        if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n            return undefined\n        }\n\n        let c = pattern[patternIndex];\n        let index = string.indexOf(c, stringIndex);\n        let best, temp;\n\n        while (index > -1) {\n            patternCache.push(index);\n            temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n            patternCache.pop();\n\n            // if downstream traversal failed, return best answer so far\n            if (!temp) {\n                return best\n            }\n\n            if (!best || best.score < temp.score) {\n                best = temp;\n            }\n\n            index = string.indexOf(c, index + 1);\n        }\n\n        return best\n    }\n\n    calculateScore(patternCache) {\n        let score = 0;\n        let temp = 1;\n\n        patternCache.forEach((index, i) => {\n            if (i > 0) {\n                if (patternCache[i - 1] + 1 === index) {\n                    temp += temp + 1;\n                }\n                else {\n                    temp = 1;\n                }\n            }\n\n            score += temp;\n        });\n\n        return score\n    }\n\n    render(string, indices, pre, post) {\n        var rendered = string.substring(0, indices[0]);\n\n        indices.forEach((index, i) => {\n            rendered += pre + string[index] + post +\n                string.substring(index + 1, (indices[i + 1]) ? indices[i + 1] : string.length);\n        });\n\n        return rendered\n    }\n\n    filter(pattern, arr, opts) {\n        opts = opts || {};\n        return arr\n            .reduce((prev, element, idx, arr) => {\n                let str = element;\n\n                if (opts.extract) {\n                    str = opts.extract(element);\n\n                    if (!str) { // take care of undefineds / nulls / etc.\n                        str = '';\n                    }\n                }\n\n                let rendered = this.match(pattern, str, opts);\n\n                if (rendered != null) {\n                    prev[prev.length] = {\n                        string: rendered.rendered,\n                        score: rendered.score,\n                        index: idx,\n                        original: element\n                    };\n                }\n\n                return prev\n            }, [])\n\n        .sort((a, b) => {\n            let compare = b.score - a.score;\n            if (compare) return compare\n            return a.index - b.index\n        })\n    }\n}\n\nclass Tribute {\n  constructor({\n    values = null,\n    iframe = null,\n    selectClass = \"highlight\",\n    containerClass = \"tribute-container\",\n    itemClass = \"\",\n    trigger = \"@\",\n    autocompleteMode = false,\n    selectTemplate = null,\n    menuItemTemplate = null,\n    lookup = \"key\",\n    fillAttr = \"value\",\n    collection = null,\n    menuContainer = null,\n    noMatchTemplate = null,\n    requireLeadingSpace = true,\n    allowSpaces = false,\n    replaceTextSuffix = null,\n    positionMenu = true,\n    spaceSelectsMatch = false,\n    searchOpts = {},\n    menuItemLimit = null,\n    menuShowMinLength = 0\n  }) {\n    this.autocompleteMode = autocompleteMode;\n    this.menuSelected = 0;\n    this.current = {};\n    this.inputEvent = false;\n    this.isActive = false;\n    this.menuContainer = menuContainer;\n    this.allowSpaces = allowSpaces;\n    this.replaceTextSuffix = replaceTextSuffix;\n    this.positionMenu = positionMenu;\n    this.hasTrailingSpace = false;\n    this.spaceSelectsMatch = spaceSelectsMatch;\n\n    if (this.autocompleteMode) {\n      trigger = \"\";\n      allowSpaces = false;\n    }\n\n    if (values) {\n      this.collection = [\n        {\n          // symbol that starts the lookup\n          trigger: trigger,\n\n          // is it wrapped in an iframe\n          iframe: iframe,\n\n          // class applied to selected item\n          selectClass: selectClass,\n\n          // class applied to the Container\n          containerClass: containerClass,\n\n          // class applied to each item\n          itemClass: itemClass,\n\n          // function called on select that retuns the content to insert\n          selectTemplate: (\n            selectTemplate || Tribute.defaultSelectTemplate\n          ).bind(this),\n\n          // function called that returns content for an item\n          menuItemTemplate: (\n            menuItemTemplate || Tribute.defaultMenuItemTemplate\n          ).bind(this),\n\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: (t => {\n            if (typeof t === \"string\") {\n              if (t.trim() === \"\") return null;\n              return t;\n            }\n            if (typeof t === \"function\") {\n              return t.bind(this);\n            }\n\n            return (\n              noMatchTemplate ||\n              function() {\n                return \"<li>No Match Found!</li>\";\n              }.bind(this)\n            );\n          })(noMatchTemplate),\n\n          // column to search against in the object\n          lookup: lookup,\n\n          // column that contains the content to insert by default\n          fillAttr: fillAttr,\n\n          // array of objects or a function returning an array of objects\n          values: values,\n\n          requireLeadingSpace: requireLeadingSpace,\n\n          searchOpts: searchOpts,\n\n          menuItemLimit: menuItemLimit,\n\n          menuShowMinLength: menuShowMinLength\n        }\n      ];\n    } else if (collection) {\n      if (this.autocompleteMode)\n        console.warn(\n          \"Tribute in autocomplete mode does not work for collections\"\n        );\n      this.collection = collection.map(item => {\n        return {\n          trigger: item.trigger || trigger,\n          iframe: item.iframe || iframe,\n          selectClass: item.selectClass || selectClass,\n          containerClass: item.containerClass || containerClass,\n          itemClass: item.itemClass || itemClass,\n          selectTemplate: (\n            item.selectTemplate || Tribute.defaultSelectTemplate\n          ).bind(this),\n          menuItemTemplate: (\n            item.menuItemTemplate || Tribute.defaultMenuItemTemplate\n          ).bind(this),\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: (t => {\n            if (typeof t === \"string\") {\n              if (t.trim() === \"\") return null;\n              return t;\n            }\n            if (typeof t === \"function\") {\n              return t.bind(this);\n            }\n\n            return (\n              noMatchTemplate ||\n              function() {\n                return \"<li>No Match Found!</li>\";\n              }.bind(this)\n            );\n          })(noMatchTemplate),\n          lookup: item.lookup || lookup,\n          fillAttr: item.fillAttr || fillAttr,\n          values: item.values,\n          requireLeadingSpace: item.requireLeadingSpace,\n          searchOpts: item.searchOpts || searchOpts,\n          menuItemLimit: item.menuItemLimit || menuItemLimit,\n          menuShowMinLength: item.menuShowMinLength || menuShowMinLength\n        };\n      });\n    } else {\n      throw new Error(\"[Tribute] No collection specified.\");\n    }\n\n    new TributeRange(this);\n    new TributeEvents(this);\n    new TributeMenuEvents(this);\n    new TributeSearch(this);\n  }\n\n  get isActive() {\n    return this._isActive;\n  }\n\n  set isActive(val) {\n    if (this._isActive != val) {\n      this._isActive = val;\n      if (this.current.element) {\n        let noMatchEvent = new CustomEvent(`tribute-active-${val}`);\n        this.current.element.dispatchEvent(noMatchEvent);\n      }\n    }\n  }\n\n  static defaultSelectTemplate(item) {\n    if (typeof item === \"undefined\")\n      return `${this.current.collection.trigger}${this.current.mentionText}`;\n    if (this.range.isContentEditable(this.current.element)) {\n      return (\n        '<span class=\"tribute-mention\">' +\n        (this.current.collection.trigger +\n          item.original[this.current.collection.fillAttr]) +\n        \"</span>\"\n      );\n    }\n\n    return (\n      this.current.collection.trigger +\n      item.original[this.current.collection.fillAttr]\n    );\n  }\n\n  static defaultMenuItemTemplate(matchItem) {\n    return matchItem.string;\n  }\n\n  static inputTypes() {\n    return [\"TEXTAREA\", \"INPUT\"];\n  }\n\n  triggers() {\n    return this.collection.map(config => {\n      return config.trigger;\n    });\n  }\n\n  attach(el) {\n    if (!el) {\n      throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n    }\n\n    // Check if it is a jQuery collection\n    if (typeof jQuery !== \"undefined\" && el instanceof jQuery) {\n      el = el.get();\n    }\n\n    // Is el an Array/Array-like object?\n    if (\n      el.constructor === NodeList ||\n      el.constructor === HTMLCollection ||\n      el.constructor === Array\n    ) {\n      let length = el.length;\n      for (var i = 0; i < length; ++i) {\n        this._attach(el[i]);\n      }\n    } else {\n      this._attach(el);\n    }\n  }\n\n  _attach(el) {\n    if (el.hasAttribute(\"data-tribute\")) {\n      console.warn(\"Tribute was already bound to \" + el.nodeName);\n    }\n\n    this.ensureEditable(el);\n    this.events.bind(el);\n    el.setAttribute(\"data-tribute\", true);\n  }\n\n  ensureEditable(element) {\n    if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n      if (element.contentEditable) {\n        element.contentEditable = true;\n      } else {\n        throw new Error(\"[Tribute] Cannot bind to \" + element.nodeName);\n      }\n    }\n  }\n\n  createMenu(containerClass) {\n    let wrapper = this.range.getDocument().createElement(\"div\"),\n      ul = this.range.getDocument().createElement(\"ul\");\n    wrapper.className = containerClass;\n    wrapper.appendChild(ul);\n\n    if (this.menuContainer) {\n      return this.menuContainer.appendChild(wrapper);\n    }\n\n    return this.range.getDocument().body.appendChild(wrapper);\n  }\n\n  showMenuFor(element, scrollTo) {\n    // Only proceed if menu isn't already shown for the current element & mentionText\n    if (\n      this.isActive &&\n      this.current.element === element &&\n      this.current.mentionText === this.currentMentionTextSnapshot\n    ) {\n      return;\n    }\n    this.currentMentionTextSnapshot = this.current.mentionText;\n\n    // create the menu if it doesn't exist.\n    if (!this.menu) {\n      this.menu = this.createMenu(this.current.collection.containerClass);\n      element.tributeMenu = this.menu;\n      this.menuEvents.bind(this.menu);\n    }\n\n    this.isActive = true;\n    this.menuSelected = 0;\n\n    if (!this.current.mentionText) {\n      this.current.mentionText = \"\";\n    }\n\n    const processValues = values => {\n      // Tribute may not be active any more by the time the value callback returns\n      if (!this.isActive) {\n        return;\n      }\n\n      let items = this.search.filter(this.current.mentionText, values, {\n        pre: this.current.collection.searchOpts.pre || \"<span>\",\n        post: this.current.collection.searchOpts.post || \"</span>\",\n        skip: this.current.collection.searchOpts.skip,\n        extract: el => {\n          if (typeof this.current.collection.lookup === \"string\") {\n            return el[this.current.collection.lookup];\n          } else if (typeof this.current.collection.lookup === \"function\") {\n            return this.current.collection.lookup(el, this.current.mentionText);\n          } else {\n            throw new Error(\n              \"Invalid lookup attribute, lookup must be string or function.\"\n            );\n          }\n        }\n      });\n\n      if (this.current.collection.menuItemLimit) {\n        items = items.slice(0, this.current.collection.menuItemLimit);\n      }\n\n      this.current.filteredItems = items;\n\n      let ul = this.menu.querySelector(\"ul\");\n\n      this.range.positionMenuAtCaret(scrollTo);\n\n      if (!items.length) {\n        let noMatchEvent = new CustomEvent(\"tribute-no-match\", {\n          detail: this.menu\n        });\n        this.current.element.dispatchEvent(noMatchEvent);\n        if (\n          (typeof this.current.collection.noMatchTemplate === \"function\" &&\n            !this.current.collection.noMatchTemplate()) ||\n          !this.current.collection.noMatchTemplate\n        ) {\n          this.hideMenu();\n        } else {\n          typeof this.current.collection.noMatchTemplate === \"function\"\n            ? (ul.innerHTML = this.current.collection.noMatchTemplate())\n            : (ul.innerHTML = this.current.collection.noMatchTemplate);\n        }\n\n        return;\n      }\n\n      ul.innerHTML = \"\";\n      let fragment = this.range.getDocument().createDocumentFragment();\n\n      items.forEach((item, index) => {\n        let li = this.range.getDocument().createElement(\"li\");\n        li.setAttribute(\"data-index\", index);\n        li.className = this.current.collection.itemClass;\n        li.addEventListener(\"mousemove\", e => {\n          let [li, index] = this._findLiTarget(e.target);\n          if (e.movementY !== 0) {\n            this.events.setActiveLi(index);\n          }\n        });\n        if (this.menuSelected === index) {\n          li.classList.add(this.current.collection.selectClass);\n        }\n        li.innerHTML = this.current.collection.menuItemTemplate(item);\n        fragment.appendChild(li);\n      });\n      ul.appendChild(fragment);\n    };\n\n    if (typeof this.current.collection.values === \"function\") {\n      this.current.collection.values(this.current.mentionText, processValues);\n    } else {\n      processValues(this.current.collection.values);\n    }\n  }\n\n  _findLiTarget(el) {\n    if (!el) return [];\n    const index = el.getAttribute(\"data-index\");\n    return !index ? this._findLiTarget(el.parentNode) : [el, index];\n  }\n\n  showMenuForCollection(element, collectionIndex) {\n    if (element !== document.activeElement) {\n      this.placeCaretAtEnd(element);\n    }\n\n    this.current.collection = this.collection[collectionIndex || 0];\n    this.current.externalTrigger = true;\n    this.current.element = element;\n\n    if (element.isContentEditable)\n      this.insertTextAtCursor(this.current.collection.trigger);\n    else this.insertAtCaret(element, this.current.collection.trigger);\n\n    this.showMenuFor(element);\n  }\n\n  // TODO: make sure this works for inputs/textareas\n  placeCaretAtEnd(el) {\n    el.focus();\n    if (\n      typeof window.getSelection != \"undefined\" &&\n      typeof document.createRange != \"undefined\"\n    ) {\n      var range = document.createRange();\n      range.selectNodeContents(el);\n      range.collapse(false);\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } else if (typeof document.body.createTextRange != \"undefined\") {\n      var textRange = document.body.createTextRange();\n      textRange.moveToElementText(el);\n      textRange.collapse(false);\n      textRange.select();\n    }\n  }\n\n  // for contenteditable\n  insertTextAtCursor(text) {\n    var sel, range;\n    sel = window.getSelection();\n    range = sel.getRangeAt(0);\n    range.deleteContents();\n    var textNode = document.createTextNode(text);\n    range.insertNode(textNode);\n    range.selectNodeContents(textNode);\n    range.collapse(false);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n\n  // for regular inputs\n  insertAtCaret(textarea, text) {\n    var scrollPos = textarea.scrollTop;\n    var caretPos = textarea.selectionStart;\n\n    var front = textarea.value.substring(0, caretPos);\n    var back = textarea.value.substring(\n      textarea.selectionEnd,\n      textarea.value.length\n    );\n    textarea.value = front + text + back;\n    caretPos = caretPos + text.length;\n    textarea.selectionStart = caretPos;\n    textarea.selectionEnd = caretPos;\n    textarea.focus();\n    textarea.scrollTop = scrollPos;\n  }\n\n  hideMenu() {\n    if (this.menu) {\n      this.menu.style.cssText = \"display: none;\";\n      this.isActive = false;\n      this.menuSelected = 0;\n      this.current = {};\n    }\n  }\n\n  selectItemAtIndex(index, originalEvent) {\n    index = parseInt(index);\n    if (typeof index !== \"number\" || isNaN(index)) return;\n    let item = this.current.filteredItems[index];\n    let content = this.current.collection.selectTemplate(item);\n    if (content !== null) this.replaceText(content, originalEvent, item);\n  }\n\n  replaceText(content, originalEvent, item) {\n    this.range.replaceTriggerText(content, true, true, originalEvent, item);\n  }\n\n  _append(collection, newValues, replace) {\n    if (typeof collection.values === \"function\") {\n      throw new Error(\"Unable to append to values, as it is a function.\");\n    } else if (!replace) {\n      collection.values = collection.values.concat(newValues);\n    } else {\n      collection.values = newValues;\n    }\n  }\n\n  append(collectionIndex, newValues, replace) {\n    let index = parseInt(collectionIndex);\n    if (typeof index !== \"number\")\n      throw new Error(\"please provide an index for the collection to update.\");\n\n    let collection = this.collection[index];\n\n    this._append(collection, newValues, replace);\n  }\n\n  appendCurrent(newValues, replace) {\n    if (this.isActive) {\n      this._append(this.current.collection, newValues, replace);\n    } else {\n      throw new Error(\n        \"No active state. Please use append instead and pass an index.\"\n      );\n    }\n  }\n\n  detach(el) {\n    if (!el) {\n      throw new Error(\"[Tribute] Must pass in a DOM node or NodeList.\");\n    }\n\n    // Check if it is a jQuery collection\n    if (typeof jQuery !== \"undefined\" && el instanceof jQuery) {\n      el = el.get();\n    }\n\n    // Is el an Array/Array-like object?\n    if (\n      el.constructor === NodeList ||\n      el.constructor === HTMLCollection ||\n      el.constructor === Array\n    ) {\n      let length = el.length;\n      for (var i = 0; i < length; ++i) {\n        this._detach(el[i]);\n      }\n    } else {\n      this._detach(el);\n    }\n  }\n\n  _detach(el) {\n    this.events.unbind(el);\n    if (el.tributeMenu) {\n      this.menuEvents.unbind(el.tributeMenu);\n    }\n\n    setTimeout(() => {\n      el.removeAttribute(\"data-tribute\");\n      this.isActive = false;\n      if (el.tributeMenu) {\n        el.tributeMenu.remove();\n      }\n    });\n  }\n}\n\n/**\n * Tribute.js\n * Native ES6 JavaScript @mention Plugin\n **/\n\nexport default Tribute;\n"],
  "mappings": "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",
  "names": ["trigger", "arr", "li", "index"]
}
